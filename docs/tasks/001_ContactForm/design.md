# お問合せフォーム機能設計書

## 1. ユーザーニーズ
- サービスについて質問や要望を伝えたい。
- 送信した内容が確実に届いたか確認したい（送信完了画面）。
- 簡単に連絡を取りたい（シンプルなフォーム）。

## 2. 仕様要件
### 機能要件
- **入力項目**:
  - 名前 (必須)
  - メールアドレス (必須、形式チェック)
  - 件名 (任意)
  - 本文 (必須)
- **送信処理**:
  - 入力内容をMongoDBに保存する。
  - 管理者宛にメール通知を送信する (Nodemailer使用)。
- **画面遷移**:
  - 入力画面 -> 送信完了画面 (または完了メッセージ表示)

### 非機能要件
- **レスポンシブ**: スマホ・PC両対応。
- **UX**: 入力エラー時は即座にフィードバックを表示。

## 3. 処理手順設計
### フロントエンド (`/contact`)
1. **フォーム表示**: MUIの `TextField` を使用して入力フォームを構築。
2. **バリデーション**: 送信ボタン押下時、または入力時に必須・形式チェックを行う。
3. **API送信**: `POST /api/contact` へJSONデータを送信。
4. **結果ハンドリング**:
   - 成功: 完了メッセージを表示し、フォームをクリア。
   - 失敗: エラーメッセージを表示。

### バックエンド (`/api/contact`)
1. **リクエスト受信**: POSTリクエストを受け取る。
2. **バリデーション**: サーバーサイドでも必須チェックを行う。
3. **DB保存**: `Contact` モデルを使用してMongoDBに保存。
4. **メール送信**: `nodemailer` を使用して管理者へメール送信。
5. **レスポンス**: 成功/失敗ステータスを返す。

### データモデル (`Contact`)
- `name`: String (Required)
- `email`: String (Required)
- `subject`: String
- `message`: String (Required)
- `createdAt`: Date (Default: Date.now)
